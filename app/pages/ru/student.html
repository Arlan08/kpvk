<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Костанайский Политехнический Высший Колледж</title>
    <meta name="author" content="Амангелді Арлан">
    <meta name="description" content="путиводитель для колледжа">
    <style>
        body::-webkit-scrollbar {
            display: none;
        }
        .frame-content {
            flex: 1;
            height: 100vh;
            width: 100%;
            padding: 0px;
        }
        .page-content {
            padding: 0px !important;
        }
    </style>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="../../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../../assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="../../assets/global/css/components-md.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="../../assets/global/css/plugins-md.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="../../assets/pages/css/pricing.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="../../assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="../../assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="../../assets/layouts/layout/css/custom.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white page-md">
<div class="page-wrapper">
    <!-- BEGIN HEADER -->
    <div class="page-header navbar navbar-fixed-top">
        <!-- BEGIN HEADER INNER -->
        <div class="page-header-inner ">
            <!-- BEGIN LOGO -->
            <div class="page-logo">
                <a href="../../index.html">
                    <p class="logo-default" style="color: #b4bcc8; padding-left: 30px">
                        <i class="fa fa-mail-reply"></i>
                    </p>
                </a>
                <div class="menu-toggler sidebar-toggler">
                    <span></span>
                </div>
            </div>
            <!-- END LOGO -->
        </div>
        <!-- END HEADER INNER -->
    </div>
    <!-- END HEADER -->
    <!-- BEGIN HEADER & CONTENT DIVIDER -->
    <div class="clearfix"> </div>
    <!-- END HEADER & CONTENT DIVIDER -->
    <!-- BEGIN CONTAINER -->
    <div class="page-container">
        <!-- BEGIN SIDEBAR -->
        <div class="page-sidebar-wrapper">
            <!-- BEGIN SIDEBAR -->
            <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
            <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
            <div class="page-sidebar navbar-collapse collapse">
                <!-- BEGIN SIDEBAR MENU -->
                <ul class="page-sidebar-menu  page-header-fixed " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">
                    <!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
                    <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                    <li class="sidebar-toggler-wrapper hide">
                        <div class="sidebar-toggler">
                            <span></span>
                        </div>
                    </li>
                    <li class="heading">
                        <h3 class="uppercase">Главное меню</h3>
                    </li>
                    <li class="nav-item  ">
                        <a href="javascript:;" class="nav-link nav-toggle">
                            <i class="icon-map"></i>
                            <span class="title">Организация обучения в колледже</span>
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li class="nav-item  ">
                                <a target="content" href="generalInformation.html" class="nav-link ">
                                    <span class="title">Общие сведения</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="internalRegulations.html" class="nav-link ">
                                    <span class="title">Правила внутреннего распорядка</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="infoAboutLibrary.html" class="nav-link ">
                                    <span class="title">Информация о библиотеке</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="codeAcademicIntegrity.html" class="nav-link ">
                                    <span class="title">Кодекс честности студента</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item  ">
                        <a href="javascript:;" class="nav-link nav-toggle">
                            <i class="icon-graduation"></i>
                            <span class="title">Информация для студента</span>
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li class="nav-item  ">
                                <a target="content" href="collegeManagement.html" class="nav-link ">
                                    <span class="title">Руководство колледжа</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="leisureTime.html" class="nav-link ">
                                    <span class="title">Организация досуга студента</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="educationalProcess.html" class="nav-link ">
                                    <span class="title">Образовательный процесс</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="learningProcess.html" class="nav-link ">
                                    <span class="title">Учебный процесс</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="Schedule.html" class="nav-link ">
                                    <span class="title">Расписание</span>
                                </a>
                            </li>
                            <li class="nav-item  ">
                                <a target="content" href="methodologicalSupport.html" class="nav-link ">
                                    <span class="title">Методическое обеспечение</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item  ">
                        <a target="content" href="https://do.kpvk.edu.kz/" class="nav-link">
                            <i class="icon-notebook"></i>
                            <span class="title">Дистанционное обучение</span>
                        </a>
                    </li>
                    <li class="nav-item  ">
                        <a target="content" href="https://lib.kpvk.edu.kz" class="nav-link">
                            <i class="icon-book-open"></i>
                            <span class="title">Электронная библиотека</span>
                        </a>
                    </li>
                    <li class="nav-item  ">
                        <a target="content" href="https://kpvk.edu.kz/ru/" class="nav-link">
                            <i class="icon-question"></i>
                            <span class="title">FAQ</span>
                        </a>
                    </li>
                    <li class="nav-item  ">
                        <a target="content" href="contact.html" class="nav-link">
                            <i class="icon-link"></i>
                            <span class="title">Связь</span>
                        </a>
                    </li>
                    <li class="dropdown dropdown-quick-sidebar-toggler">
                        <a href="javascript:;" class="dropdown-toggle">
                            <i class="icon-envelope-open"></i>
                            <span class="title">Чат</span>
                        </a>
                    </li>
                    <li class="nav-item  ">
                        <a href="../../index.html" class="nav-link">
                            <i class="icon-logout"></i>
                            <span class="title">Выход</span>
                        </a>
                    </li>
                </ul>
                <!-- END SIDEBAR MENU -->
                <!-- END SIDEBAR MENU -->
            </div>
            <!-- END SIDEBAR -->
        </div>
        <!-- END SIDEBAR -->
        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <iframe class="frame-content" name="content">
                </iframe>
            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->
        <!-- BEGIN QUICK SIDEBAR --> 
        <a href="javascript:;" class="page-quick-sidebar-toggler">
            <i class="icon-logout"></i>
        </a>
        <div class="page-quick-sidebar-wrapper" data-close-on-body-click="false">
            <div class="page-quick-sidebar">
                <div class="tab-content">
                    <div class="tab-pane active page-quick-sidebar-chat" id="quick_sidebar_tab_1">
                        <div class="page-quick-sidebar-chat-users" data-rail-color="#ddd" data-wrapper-class="page-quick-sidebar-list">
                            <h3 class="list-heading">Войти</h3>
                            <ul class="media-list list-items">
                                <li class="media">
                                    <div class="content login">
                                        <!-- BEGIN LOGIN FORM -->
                                        <div class="login-form">
                                            <div class="form-group">
                                                <label class="control-label visible-ie8 visible-ie9">Username</label>
                                                <input class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="off" placeholder="Username" name="username" id="username" /> </div>
                                            <div class="form-actions" style="text-align: center">
                                                <button class="btn green uppercase" onclick="login()">Login</button>
                                            </div>
                                        </div>
                                        <!-- END LOGIN FORM -->
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="page-quick-sidebar-item">
                            <div class="page-quick-sidebar-chat-user">
                                <div class="page-quick-sidebar-nav" onclick="logout()">
                                    <a href="javascript:;" class="page-quick-sidebar-back-to-list">Покинуть чат</a>
                                </div>
                                <div class="page-quick-sidebar-chat-user-messages" id="messages">
                                </div>
                                <div class="page-quick-sidebar-chat-user-form">
                                    <div class="input-group">
                                        <input id="message" type="text" class="form-control" placeholder="Type a message here...">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn green" onclick="sendMessage()">
                                                <i class="icon-paper-clip"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END QUICK SIDEBAR -->
    </div>
    <!-- END CONTAINER -->
    <!-- BEGIN FOOTER -->
    <div class="page-footer">
        <div class="page-footer-inner"> 2024 &copy; Костанайский Политехнический Высший Колледж
        </div>
        <div class="scroll-to-top">
            <i class="icon-arrow-up"></i>
        </div>
    </div>
    <!-- END FOOTER -->
</div>

<script>
    const token = localStorage.getItem("token")
    const host = "http://127.0.0.1:8989"

    if (token != null) {
        document.getElementById("quick_sidebar_tab_1").classList.add("page-quick-sidebar-content-item-shown");
    } 

    function logout() {
        localStorage.removeItem("token")
        window.location.reload();
    }

    function closeChat() {
        document.getElementsByClassName("page-quick-sidebar-wrappe").classList.remove("page-quick-sidebar-open");
    }

    function login() {
        const username = document.getElementById("username").value
        fetch(host + "/auth/" + username, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
        }).then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.text();
        }).then(data => {
            localStorage.setItem('token', data);
            document.getElementById("quick_sidebar_tab_1").classList.add("page-quick-sidebar-content-item-shown");
        });
    }

    function sendMessage() {
        const message = document.getElementById("message")
        fetch(host + "/messages", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "token": localStorage.getItem("token")
            },
            body: JSON.stringify({ text: message.value })
        }).then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        }).then(data => {
            message.value = ''
            setMessages()
        });
    }

    function setMessages() {
        fetch(host + "/messages", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        }).then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        }).then(data => {
            const docMessages = document.getElementById("messages")

            var innerHTML = ''

            data.forEach(i => {
                innerHTML += `
                    <div class="${i.authorId == localStorage.getItem("token") ? 'post out' : 'post in'}">
                        <img class="avatar" alt="" src="../../assets/layouts/layout/img/avatar.png"/>
                        <div class="message">
                            <span class="arrow"></span>
                            <a href="javascript:;" class="name">${i.author}</a>
                            <span class="datetime">${i.createdAt}</span>
                            <span class="body"> ${i.text} </span>
                        </div>
                    </div>
                `;
            });

            docMessages.innerHTML = innerHTML
        });
    }

    setMessages();
    setInterval(setMessages, 1000);
</script>


<!--[if lt IE 9]>
<script src="../../assets/global/plugins/respond.min.js"></script>
<script src="../../assets/global/plugins/excanvas.min.js"></script>
<script src="../../assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="../../assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="../../assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="../../assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="../../assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="../../assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
</body>
</html>